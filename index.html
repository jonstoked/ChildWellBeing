
<!DOCTYPE html>
<html>
<head>
	
	<title>Quick Start - Leaflet</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<!-- <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" /> -->

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>

	<!-- jon's dependencies -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script>document.write('<script src="http://' + (location.host || '${1:localhost}').split(':')[0] + ':${2:35729}/livereload.js?snipver=1"></' + 'script>')</script>

   <style>
	   html, body, #mapid {
	      height:100%;
	      width:100%;
	      padding:0px;
	      margin:0px;
	   } 
   </style>

</head>

<body>
<div id="mapid"></div>
<script>

	var counties, map;

	$.getJSON("counties.json", function(json) {
	    filterCounties(json["features"])
	});

	//takes array of counties
	function filterCounties(allCounties) {

		counties = allCounties.filter(function (county,n) {
			var name = county["properties"]["NAME10"]
	        return isCountyMetroAtlanta(name);
    	});

    	// console.log(countiesFiltered)
    	displayCounties();
	}

	function isCountyMetroAtlanta(countyName) {
		var isMetro = false
		let metroAtlantaCounties = ["Lanier", "Cherokee", "Paulding", "Cobb", "Gwinnett", "DeKalb", "Coweta", "Henry", "Butts", "Fayette", "Douglas", "Rockdale", "Clayton", "Fulton"]
		metroAtlantaCounties.forEach(function(metroAtlantaCounty){
			if (metroAtlantaCounty == countyName) {
				isMetro = true
			}
		});
		return isMetro
	}

	function displayCounties() {

		map = L.map('mapid', {
	    	fullscreenControl: true
		}).setView([33.76, -84.37], 9);

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(map);


		counties.forEach(function(county) {
			// console.log(county["properties"]["NAME10"])
			L.geoJSON(county).addTo(map);
		})






		// L.marker([51.5, -0.09]).addTo(map)
		// 	.bindPopup("<b>Champions!</b><br />We will win.").openPopup();

		// L.circle([51.508, -0.11], 500, {
		// 	color: 'red',
		// 	fillColor: '#f03',
		// 	fillOpacity: 0.5
		// }).addTo(map).bindPopup("I am a circle.");

		// L.polygon([
		// 	[51.509, -0.08],
		// 	[51.503, -0.06],
		// 	[51.51, -0.047]
		// ]).addTo(map).bindPopup("I am a polygon.");


		// var popup = L.popup();



		map.on('click', onMapClick);
	}

	function onMapClick(e) {
		popup
			.setLatLng(e.latlng)
			.setContent("You clicked the map at " + e.latlng.toString())
			.openOn(map);
	}


</script>

</body>
</html>
